# 操作系统知识

## OS概述
### OS 两大作用
（1）通过资源管理提高计算机系统的效率。 
（2）改善人机界面，向用户提供良好的工作环境。 
### OS 特征
并发性、共享性、虚拟性、不确定性。 
### OS 功能
进程管理、文件管理、存储管理、设备管理、作业管理。 
### OS 分类
批处理、分时、实时、网络（集中、C/S、对等）、分布式、微型、嵌入式。

## 进程管理
### 进程间通信
  - 管道：最简单的IPC形式，本质是内核中的一个缓冲区。非为匿名管道和命名管道。特点是单向，半双工，面向字节流。
  - 消息队列：内核中的消息链表，允许进程异步发送和接收格式化数据。特点是异步，消息有类型。
  - 共享内存：允许多个进程访问同一块内存区块。进程将一块物理内存映射到自己虚拟地址空间中，操作内存不需要经过内核。特点：最快的IPC方式，进程需要自己负责对共享内存的访问。
  - 信号量（PV操作）： 用于进程之间的同步和互斥，是一个整数值计数器。P（等待）和V（发送信号）操作。
  - 套接字：普遍用于网络通信，在一台机器上，也可以进程通信。
  - 信号：是进程间发送的软件中断，用于通知接受进程发生的某个事件。用于异步通知和异常处理。
### 进程的状态
三态模型：就绪状态、运行状态、阻塞状态
五态模型：创建状态、就绪状态、运行状态、阻塞状态、终止状态
七态模型：创建状态、就绪状态、运行状态、挂起状态、交换状态、阻塞状态、终止状态
### 进程调度

三级调度
1. 低级调度
  - 进程调度（处于就绪状态的进程）、短周期调度器
  - 从就绪队列中选择进程，分配cpu运行
2. 中级调度
  - 内存调度（处于挂起状态的进程）、交换调度器
  - 将外存中的进程调度回内存，或者把内存中的进程调度出外存
3. 高级调度
  - 作业调度、长期调度器
  - 将外存中的哪些作业（进程）调度进内存，即并行的作业。
调度算法：目标是平衡cpu利用率、吞吐量、周转时间、响应时间、公平性
1. 先来先服务
2. 短作业优先
3. 优先级调度
4. 时间片轮询
5. 多级反馈队列
6. 最短剩余时间优先

进程优先级确认
1. 静态优先级
2. 动态优先级

### 死锁

必要条件
1. 互斥条件
2. 持有并等待条件
3. 不可抢占条件
4. 循环等待条件

死锁处理
1. 死锁预防
  - 通过破坏死锁的4个必要条件预防死锁
2. 死锁避免
  - 在系统运行时，动态检查资源分配情况，确保系统不会进入不安全状态（银行家算法）
3. 死锁检测与恢复
   - 允许系统进入死锁状态，定期运行监测算法识别死锁并采取措施进行恢复
4. 死锁忽略
  - 假定死锁永远不会发生，不对死锁采取任何措施

### 存储管理
1．存储结构
（1）寄存器－Cache－主存－外存。 
（2）虚拟地址：又称相对地址、程序地址、逻辑地址等。 
（3）地址空间。 
（4）存储空间。
2．存储管理方案
（1）固定分区。 
（2）可变分区：最佳适应、最差适应、首次适应、循环首次适应。 
3．分页存储
（1）存分页存储管理：分页原理、地址结构、地址映射。 
（2）快表。 
（3）两级页表机制。 
4．分段存储
5．段页式存储
6．虚拟存储
（1）程序局部性原理：时间局部性、空间局部性。 
（2）虚拟存储器的实现：分页、分段、段页。 
（3）页面置换算法：最佳置换、FIFO、LRU、NRU。

### 设备管理
1．I/O 软件
I/O 软件的操作过程如图 4-2 所示。
2．相关技术
通道、DMA、缓冲、Spooling。

### 文件管理
1．文件与文件系统
（1）文件。 
（2）文件系统。 
（3）文件类型。 
2．文件结构和组织
（1）逻辑结构。 
（2）物理结构：连续、链接、索引、索引表。 
3．目录
文件控制块、目录结构（一级、二级、多级）。 
4．存储方法与空间
（1）空闲区表。 
（2）位示图。 
（3）空闲块链。 
（4）成组链接法。 
5．共享与保护
（1）文件共享：硬链接、符号链接（软链接）。 
（2）文件保护：存取控制矩阵、存取控制表、用户权限表、密码。 
6．安全与可靠性
（1）系统安全：系统级、用户级、目录级、文件级。 
（2）文件系统的可靠性：转储和恢复、日志文件、一致性。

### 作业管理
1．作业与作业控制
（1）作业控制。 
（2）作业状态及转换：提交、后备、执行、完成。 
（3）JCB 和作业后备队列。 
2．作业调度
先来先服务、短作业优先、响应比高优先、优先级调度算法、均衡调度算法、调度算法均衡
指标